---
layout: post
title: "Monorepo 01"
date: 2025-11-10 18:40:00 +0900
categories: [Blogging]
tags: [react, monorepo]
---

## Monorepo?

ëª¨ë…¸ë ˆí¬ëŠ” í•˜ë‚˜ì˜ ë²„ì „ ê´€ë¦¬ ì €ì¥ì†Œ(Repository) ì•ˆì— ì—¬ëŸ¬ ê°œì˜ ë…ë¦½ì ì¸ í”„ë¡œì íŠ¸, ì• í”Œë¦¬ì¼€ì´ì…˜, ë¼ì´ë¸ŒëŸ¬ë¦¬ ì½”ë“œë¥¼ ëª¨ë‘ í¬í•¨í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ë°©ì‹.
ì´ëŠ” ê° í”„ë¡œì íŠ¸ë§ˆë‹¤ ë³„ë„ì˜ ì €ì¥ì†Œë¥¼ êµ¬ì„±í•˜ëŠ” ì „í†µì ì¸ ë°©ì‹(Polyrepo ë˜ëŠ” Multirepo)ê³¼ëŠ” ëŒ€ì¡°ë¨.

### React í™˜ê²½ì—ì„œ ëª¨ë…¸ë ˆí¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ì 

React ê¸°ë°˜ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì—ì„œ ëª¨ë…¸ë ˆí¬ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì£¼ìš” ì´ì ì„ ì–»ì„ ìˆ˜ ìˆë‹¤

| ì¥ì     | ì„¤ëª…  |
| ------- | ----- |
| ì½”ë“œ ì¬ì‚¬ìš©ì„± ê·¹ëŒ€í™”            | ì—¬ëŸ¬ React ì• í”Œë¦¬ì¼€ì´ì…˜(ì˜ˆ: ì‚¬ìš©ì ì•±, ê´€ë¦¬ì ì•±)ì´ **ê³µí†µì˜ UI ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬(ui-kit)**ë‚˜ ê³µí†µ ë¡œì§(utils)ì„ ì‰½ê²Œ ê³µìœ í•˜ê³  ê°€ì ¸ì™€ ì‚¬ìš© ê°€ëŠ¥. ë³„ë„ì˜ ë°°í¬ ê³¼ì • ì—†ì´ ë‚´ë¶€ íŒ¨í‚¤ì§€ì²˜ëŸ¼ ì‚¬ìš© ê°€ëŠ¥. |
| ì›ìì (Atomic) ì»¤ë°‹ ë° ë¦¬íŒ©í† ë§ | ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ APIë¥¼ ë³€ê²½í•  ë•Œ, í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì½”ë“œë¥¼ í•˜ë‚˜ì˜ ì»¤ë°‹ìœ¼ë¡œ ë™ì‹œì— ì—…ë°ì´íŠ¸í•˜ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆì–´ ì•ˆì •ì„±ì´ ë†’ë‹¤  |
| ì¼ê´€ëœ ê°œë°œ í™˜ê²½                | ëª¨ë“  í”„ë¡œì íŠ¸ê°€ í•˜ë‚˜ì˜ ë£¨íŠ¸ ë ˆë²¨ì—ì„œ ë‹¨ì¼í•œ ì„¤ì • íŒŒì¼ (ESLint, Prettier, TypeScript ì„¤ì • ë“±)ì„ ê³µìœ í•  ìˆ˜ ìˆì–´, ê°œë°œ í‘œì¤€ê³¼ í’ˆì§ˆì„ ì¼ê´€ì„± ìˆê²Œ ìœ ì§€ ê°€ëŠ¥ |
| íš¨ìœ¨ì ì¸ ì˜ì¡´ì„± ê´€ë¦¬            | pnpmì´ë‚˜ Yarnì˜ Workspaces ê¸°ëŠ¥ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ë£¨íŠ¸ ë ˆë²¨ë¡œ **í˜¸ì´ìŠ¤íŒ…(Hoisting)**í•˜ì—¬, ì¤‘ë³µë˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ í•œ ë²ˆë§Œ ì„¤ì¹˜í•˜ê³  ë””ìŠ¤í¬ ê³µê°„ì„ ì ˆì•½ ê°€ëŠ¥ |

## Monorepo ì‹¤ë¡€

ìµœì‹  ë° ì¶”ì²œë˜ëŠ” ë°©ì‹ì€ Vite + pnpm + Tailwind CSS JIT ëª¨ë“œ + Workspace Protocol ì„ ì‚¬ìš©í•˜ëŠ” Monorepo êµ¬ì„±

### ì˜ˆì œ Monorepo êµ¬ì¡°

```bash
my-monorepo/
â”œâ”€ packages/
â”‚  â”œâ”€ shared/
â”‚  â””â”€ tailwind-config/
â”œâ”€ apps/
â”‚  â”œâ”€ web/
â”‚  â””â”€ admin/
â”œâ”€ tailwind.config.js
â”œâ”€ postcss.config.js
â”œâ”€ vite.config.js
â”œâ”€ pnpm-workspace.yaml
â”œâ”€ package.json
```

### 1. í”„ë¡œì íŠ¸ ì´ˆê¸°í™”

```bash
mkdir my-monorepo
cd my-monorepo
```

```bash
# pnpm ì„¤ì¹˜ (node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨)
npm install -g pnpm

# monorepo ì´ˆê¸°í™”
pnpm init
```

pnpm-workspace.yaml ìƒì„±
```bash
packages:
  - 'apps/*'
  - 'packages/*'
```

### 2. Tailwind ê³µí†µ ì„¤ì • íŒ¨í‚¤ì§€ (optional)

Tailwind ì„¤ì •ì„ ì—¬ëŸ¬ ì•±ì—ì„œ ê³µìœ í•˜ê¸° ìœ„í•´ ë³„ë„ íŒ¨í‚¤ì§€ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

```bash
mkdir -p packages/tailwind-config
cd packages/tailwind-config
pnpm init
```

tailwind.config.jsë¥¼ ë£¨íŠ¸ì— ìƒì„±:
```JavaScript
// my-monorepo/tailwind.config.js
module.exports = {
  content: [
    './apps/**/*.{js,jsx,ts,tsx}',
    './packages/**/*.{js,jsx,ts,tsx}',
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

```javascript
// packages/tailwind-config/index.js
// ë‹¤ë¥¸ ì•±ì—ì„œ tailwind.config.jsë¥¼ ê³µìœ í•˜ê¸° ìœ„í•œ íŒŒì¼
module.exports = {
  content: {
    files: ['./apps/**/*.{js,jsx,ts,tsx}', './packages/**/*.{js,jsx,ts,tsx}'],
  },
  theme: {
    extend: {},
  },
  plugins: [],
}
```

package.json (tailwind-config):
```json
{
  "name": "tailwind-config",
  "version": "1.0.0"
}
```

### 3. React ì•± ìƒì„± (Vite ê¸°ë°˜)

#### Web ì•± ìƒì„±

```bash
mkdir -p apps/web
cd apps/web
pnpm create vite@latest . --template react
```

#### Admin ì•± ìƒì„± (ë˜ ë‹¤ë¥¸ React ì•±)

```bash
mkdir -p apps/admin
cd apps/admin
pnpm create vite@latest . --template react
```

### 4. Tailwind CSS ì„¤ì¹˜

ê° ì•±ì— Tailwind ì„¤ì¹˜ (ë˜ëŠ” ê³µí†µ ì„¤ì¹˜ ê°€ëŠ¥)
```bash
cd ../../apps/web
pnpm add -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

tailwind.config.jsëŠ” ë£¨íŠ¸ì— ìˆëŠ” ê²ƒì„ ì°¸ì¡°í•˜ê²Œ í•œë‹¤.
```javascript
// apps/web/tailwind.config.js
module.exports = {
  presets: [require('../../tailwind.config')],
}
```

postcss.config.js:
```javascript
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
```

### 5. ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ ìƒì„±

```bash
mkdir -p packages/shared
cd packages/shared
pnpm init
```

React ê³µí†µ ì»´í¬ë„ŒíŠ¸, í›…, íƒ€ì… ë“±ì„ ì—¬ê¸°ì— ë„£ì„ ìˆ˜ ìˆë‹¤. </br>
ì˜ˆì‹œ: packages/shared/src/utils.ts
```typescript
export function formatDate(date: Date) {
  return date.toLocaleDateString()
}
```

tsconfig.json ì„¤ì •:
```json
{
  "compilerOptions": {
    "outDir": "./dist",
    "rootDir": "./src",
    "module": "ESNext",
    "target": "ESNext",
    "moduleResolution": "Node",
    "esModuleInterop": true,
    "declaration": true
  },
  "include": ["src"]
}
```

ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€:
```json
{
  "scripts": {
    "build": "tsc"
  }
}
```

### 6. ì•±ì—ì„œ ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©

apps/web/package.jsonì— ì¶”ê°€:
```json
{
  "dependencies": {
    "shared": "workspace:*"
  }
}
```

ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©:
```typescript
// apps/web/src/App.tsx
import { formatDate } from 'shared'

function App() {
  return <div>{formatDate(new Date())}</div>
}
```

### 7. TypeScript ì„¤ì • (ë£¨íŠ¸ ê¸°ì¤€)

tsconfig.jsonì— path ì¶”ê°€ ê°€ëŠ¥:
```json
{
  "compilerOptions": {
    "types": ["vite/client"],
    "baseUrl": ".",
    "paths": {
      "@shared/*": ["./packages/shared/src/*"]
    }
  }
}
```

ì‚¬ìš©:
```typescript
import { formatDate } from '@shared/utils'
```

### ìµœì¢… package.json (ë£¨íŠ¸)

```json
{
  "name": "my-monorepo",
  "private": true,
  "workspaces": {
    "packages": ["apps/*", "packages/*"]
  },
  "scripts": {
    "dev:web": "cd apps/web && pnpm dev",
    "dev:admin": "cd apps/admin && pnpm dev",
    "build:web": "cd apps/web && pnpm build",
    "build:admin": "cd apps/admin && pnpm build"
  }
}
```

### ìš”ì•½

- Monorepo ë„êµ¬: pnpm Workspaces
- ë¹Œë“œ ë„êµ¬: Vite
- ìŠ¤íƒ€ì¼ë§: Tailwind CSS (ê³µí†µ ì„¤ì • ê³µìœ )
- ê³µí†µ ë¼ì´ë¸ŒëŸ¬ë¦¬: packages/sharedë¡œ ë¶„ë¦¬
- TypeScript Path: path alias ì„¤ì •ìœ¼ë¡œ ê¹”ë”í•œ import
- ë¹Œë“œ/ê°œë°œ: pnpm dev, pnpm buildë¡œ ì•±ë³„ ì‹¤í–‰

## ìë™ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ (Shell Script)

ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì•„ë˜ êµ¬ì¡°ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•œë‹¤:
```bash
my-monorepo/
â”œâ”€ apps/
â”‚  â”œâ”€ web/
â”‚  â””â”€ admin/
â”œâ”€ packages/
â”‚  â”œâ”€ shared/
â”‚  â””â”€ tailwind-config/
â”œâ”€ pnpm-workspace.yaml
â”œâ”€ package.json
â”œâ”€ tailwind.config.js
â”œâ”€ postcss.config.js
â”œâ”€ vite.config.js
```

### ì‹¤í–‰ë°©ë²•

1. ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³µì‚¬í•˜ì—¬ setup-monorepo.sh íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
2. ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬: chmod +x setup-monorepo.sh
3. ì‹¤í–‰: ./setup-monorepo.sh

setup-monorepo.sh ìŠ¤í¬ë¦½íŠ¸
```bash
#!/bin/bash

# 1. ê¸°ë³¸ ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p my-monorepo/apps/web my-monorepo/apps/admin my-monorepo/packages/shared my-monorepo/packages/tailwind-config
cd my-monorepo || exit

# 2. pnpm ì„¤ì¹˜ (ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©´ ìƒëµ)
if ! command -v pnpm &> /dev/null
then
  echo "pnpmì´ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì„¤ì¹˜ ì¤‘..."
  npm install -g pnpm
fi

# 3. ë£¨íŠ¸ package.json ìƒì„±
cat <<EOT > package.json
{
  "name": "my-monorepo",
  "private": true,
  "workspaces": {
    "packages": ["apps/*", "packages/*"]
  },
  "scripts": {
    "dev:web": "cd apps/web && pnpm dev",
    "dev:admin": "cd apps/admin && pnpm dev",
    "build:web": "cd apps/web && pnpm build",
    "build:admin": "cd apps/admin && pnpm build"
  }
}
EOT

# 4. pnpm-workspace.yaml ìƒì„±
cat <<EOT > pnpm-workspace.yaml
packages:
  - 'apps/*'
  - 'packages/*'
EOT

# 5. Tailwind ê³µí†µ ì„¤ì •
cat <<EOT > tailwind.config.js
module.exports = {
  content: {
    files: ['./apps/**/*.{js,jsx,ts,tsx}', './packages/**/*.{js,jsx,ts,tsx}'],
  },
  theme: {
    extend: {},
  },
  plugins: [],
}
EOT

cat <<EOT > postcss.config.js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
EOT

# 6. Vite config (ë£¨íŠ¸ì— ê¸°ë³¸ vite.config.js)
cat <<EOT > vite.config.js
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
})
EOT

# 7. ê³µí†µ TypeScript ì„¤ì •
cat <<EOT > tsconfig.json
{
  "compilerOptions": {
    "baseUrl": ".",
    "types": ["vite/client"],
    "module": "ESNext",
    "target": "ESNext",
    "moduleResolution": "Node",
    "esModuleInterop": true,
    "strict": true,
    "skipLibCheck": true
  },
  "include": ["apps/**/*", "packages/**/*"],
  "references": [
    { "path": "./apps/web/tsconfig.json" },
    { "path": "./apps/admin/tsconfig.json" },
    { "path": "./packages/shared/tsconfig.json" }
  ]
}
EOT

# 8. Shared íŒ¨í‚¤ì§€ ìƒì„±
cd packages/shared || exit

cat <<EOT > package.json
{
  "name": "shared",
  "version": "1.0.0",
  "scripts": {
    "build": "tsc"
  },
  "main": "dist/index.js",
  "types": "dist/index.d.ts"
}
EOT

mkdir src
cat <<EOT > src/utils.ts
export function formatDate(date: Date): string {
  return date.toLocaleDateString()
}
EOT

cat <<EOT > tsconfig.json
{
  "compilerOptions": {
    "outDir": "./dist",
    "rootDir": "./src",
    "module": "ESNext",
    "target": "ESNext",
    "moduleResolution": "Node",
    "esModuleInterop": true,
    "strict": true,
    "declaration": true
  },
  "include": ["src"]
}
EOT

cd ../../..

# 9. Tailwind Config íŒ¨í‚¤ì§€ ìƒì„±
cd packages/tailwind-config || exit

cat <<EOT > package.json
{
  "name": "tailwind-config",
  "version": "1.0.0"
}
EOT

cat <<EOT > index.js
module.exports = {
  content: {
    files: [
      '../../apps/**/*.{js,jsx,ts,tsx}',
      '../../packages/**/*.{js,jsx,ts,tsx}'
    ]
  },
  theme: {
    extend: {},
  },
  plugins: [],
}
EOT

cd ../../..

# 10. Web ì•± ìƒì„±
cd apps/web || exit

pnpm create vite@latest . --template react

# Web ì•±ì— Tailwind ì„¤ì¹˜
pnpm add -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

cat <<EOT > tailwind.config.js
module.exports = {
  presets: [require('../../tailwind.config')],
}
EOT

cat <<EOT > tsconfig.json
{
  "compilerOptions": {
    "baseUrl": "..",
    "types": ["vite/client"]
  },
  "include": ["src"]
}
EOT

# Web ì•±ì—ì„œ shared ì‚¬ìš©
cd ../../packages/shared
pnpm build
cd ../../apps/web

# Web ì•±ì— ê³µìœ  íŒ¨í‚¤ì§€ ë§í¬
cd ../../apps/web
pnpm add ../shared

# Web ì•± App.tsx ìˆ˜ì •
cd src
cat <<EOT > App.tsx
import React from 'react'
import { formatDate } from 'shared'

function App() {
  return (
    <div className="p-4 bg-blue-500 text-white">
      Hello from Web App!
      <p>{formatDate(new Date())}</p>
    </div>
  )
}

export default App
EOT

cd ../../apps/web

# Web ì•±ì— Tailwind ì„¤ì • ë°˜ì˜
cat <<EOT > postcss.config.js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
EOT

# Tailwind CSS ì¶”ê°€
cat <<EOT > tailwind.config.js
module.exports = {
  presets: [require('../../tailwind-config')]
}
EOT

# index.htmlì— Tailwind ì ìš©
cd ../../apps/web
echo '<div id="root"></div>' > index.html
echo 'import React from "react";' > src/main.tsx
echo 'import ReactDOM from "react-dom/client";' >> src/main.tsx
echo 'import App from "./App";' >> src/main.tsx
echo 'ReactDOM.createRoot(document.getElementById("root")!).render(<App />);' >> src/main.tsx

# Web ì•±ì— TypeScript Path ì„¤ì •
cd ../../apps/web
cat <<EOT > tsconfig.json
{
  "compilerOptions": {
    "baseUrl": ".",
    "types": ["vite/client"],
    "paths": {
      "@shared/*": ["../../packages/shared/src/*"]
    }
  },
  "include": ["src"]
}
EOT

cd ../../..

# 11. Admin ì•± ìƒì„±
cd apps/admin || exit

pnpm create vite@latest . --template react

# Admin ì•±ì— Tailwind ì„¤ì¹˜
pnpm add -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

cat <<EOT > tailwind.config.js
module.exports = {
  presets: [require('../../tailwind.config')],
}
EOT

cat <<EOT > tsconfig.json
{
  "compilerOptions": {
    "baseUrl": ".",
    "types": ["vite/client"],
    "paths": {
      "@shared/*": ["../../packages/shared/src/*"]
    }
  },
  "include": ["src"]
}
EOT

cd ../../apps/admin
pnpm add ../shared

cd ../../apps/admin/src

# Admin App.tsx ìˆ˜ì •
cat <<EOT > App.tsx
import React from 'react'
import { formatDate } from 'shared'

function App() {
  return (
    <div className="p-4 bg-green-500 text-white">
      Hello from Admin App!
      <p>{formatDate(new Date())}</p>
    </div>
  )
}

export default App
EOT

cd ../../admin

# 12. ëª¨ë“  ì‘ì—… ì™„ë£Œ
cd ../../

echo "âœ… Monorepo ìƒì„± ì™„ë£Œ!"
echo "ğŸ‘‰ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ê°œë°œ ì‹œì‘:"
echo "cd apps/web && pnpm dev"
echo "ë˜ëŠ”"
echo "cd apps/admin && pnpm dev"
```

### ì‚¬ìš©ë²•

```bash
# ì›¹ ì•± ì‹¤í–‰
cd apps/web && pnpm dev

# ê´€ë¦¬ì ì•± ì‹¤í–‰
cd apps/admin && pnpm dev
```

### GitHub í…œí”Œë¦¿ (ì„ íƒ ì‚¬í•­)

GitHubì— í…œí”Œë¦¿ìœ¼ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ í…œí”Œë¦¿ ì €ì¥ì†Œë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤
- ì˜ˆì‹œ ì €ì¥ì†Œ: https://github.com/your-username/react-tailwind-monorepo-template

í…œí”Œë¦¿ ìƒì„± ì‹œ:
```bash
# GitHub í…œí”Œë¦¿ìœ¼ë¡œ ìƒì„±
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/your-username/react-tailwind-monorepo-template.git
git push -u origin main
```

